2025-03-31 14:45:02,631 - INFO - ETF名称获取脚本开始运行 - 2025-03-31 14:45:02.631610
2025-03-31 14:45:02,631 - INFO - Python版本: 3.12.5 (main, Mar 15 2025, 09:18:22) [GCC 12.3.1 20230912 (OpenCloudOS 12.3.1.1-1)]
2025-03-31 14:45:02,631 - INFO - AKSHARE版本: 1.16.45
2025-03-31 14:45:02,633 - INFO - 尝试从东方财富获取ETF 510300 信息...
2025-03-31 14:45:06,949 - INFO - 从东方财富获取到ETF名称: 沪深300ETF
2025-03-31 14:45:06,950 - ERROR - 保存ETF到数据库失败: table etf_list has no column named updated_at
Traceback (most recent call last):
  File "/www/wwwroot/etf-grid-app/etf_name_fetcher.py", line 155, in save_etf_to_db
    cursor.execute("""
sqlite3.OperationalError: table etf_list has no column named updated_at
2025-03-31 14:45:07,451 - INFO - ETF获取和保存完成: 成功 0, 失败 1
2025-03-31 14:45:07,451 - INFO - ETF名称获取脚本运行完成
2025-03-31 14:45:31,907 - INFO - ETF名称获取脚本开始运行 - 2025-03-31 14:45:31.907266
2025-03-31 14:45:31,907 - INFO - Python版本: 3.12.5 (main, Mar 15 2025, 09:18:22) [GCC 12.3.1 20230912 (OpenCloudOS 12.3.1.1-1)]
2025-03-31 14:45:31,907 - INFO - AKSHARE版本: 1.16.45
2025-03-31 14:45:31,908 - INFO - 尝试从东方财富获取ETF 510200 信息...
2025-03-31 14:45:37,130 - INFO - 从东方财富获取到ETF名称: 上证券商ETF
2025-03-31 14:45:37,131 - ERROR - 保存ETF到数据库失败: table etf_list has no column named updated_at
Traceback (most recent call last):
  File "/www/wwwroot/etf-grid-app/etf_name_fetcher.py", line 155, in save_etf_to_db
    cursor.execute("""
sqlite3.OperationalError: table etf_list has no column named updated_at
2025-03-31 14:45:37,632 - INFO - ETF获取和保存完成: 成功 0, 失败 1
2025-03-31 14:45:37,632 - INFO - ETF名称获取脚本运行完成
2025-03-31 15:05:23,954 - INFO - ETF名称获取脚本开始运行 - 2025-03-31 15:05:23.954286
2025-03-31 15:05:23,954 - INFO - Python版本: 3.12.5 (main, Mar 15 2025, 09:18:22) [GCC 12.3.1 20230912 (OpenCloudOS 12.3.1.1-1)]
2025-03-31 15:05:23,954 - INFO - AKSHARE版本: 1.16.45
2025-03-31 15:05:23,955 - INFO - 尝试从东方财富获取ETF 510200 信息...
2025-03-31 15:05:28,820 - INFO - 从东方财富获取到ETF名称: 上证券商ETF
2025-03-31 15:05:28,820 - ERROR - 保存ETF到数据库失败: table etf_list has no column named updated_at
Traceback (most recent call last):
  File "/www/wwwroot/etf-grid-app/etf_name_fetcher.py", line 155, in save_etf_to_db
    cursor.execute("""
sqlite3.OperationalError: table etf_list has no column named updated_at
2025-03-31 15:05:29,321 - INFO - ETF获取和保存完成: 成功 0, 失败 1
2025-03-31 15:05:29,321 - INFO - ETF名称获取脚本运行完成
2025-03-31 15:06:29,439 - INFO - ETF名称获取脚本开始运行 - 2025-03-31 15:06:29.439251
2025-03-31 15:06:29,439 - INFO - Python版本: 3.12.5 (main, Mar 15 2025, 09:18:22) [GCC 12.3.1 20230912 (OpenCloudOS 12.3.1.1-1)]
2025-03-31 15:06:29,439 - INFO - AKSHARE版本: 1.16.45
2025-03-31 15:06:29,440 - INFO - 当前表结构: ['id', 'symbol', 'name', 'description', 'is_official', 'category', 'correlation', 'volatility_type', 'weight', 'created_at', 'last_updated']
2025-03-31 15:06:29,440 - INFO - 添加缺失的updated_at列
2025-03-31 15:06:29,444 - INFO - 尝试从东方财富获取ETF 510200 信息...
2025-03-31 15:06:46,451 - INFO - 获取到ETF数据，形状: (1080, 37), 列名: ['代码', '名称', '最新价', 'IOPV实时估值', '基金折价率', '涨跌额', '涨跌幅', '成交量', '成交额', '开盘价', '最高价', '最低价', '昨收', '振幅', '换手率', '量比', '委比', '外盘', '内盘', '主力净流入-净额', '主力净流入-净占比', '超大单净流入-净额', '超大单净流入-净占比', '大单净流入-净额', '大单净流入-净占比', '中单净流入-净额', '中单净流入-净占比', '小单净流入-净额', '小单净流入-净占比', '现手', '买一', '卖一', '最新份额', '流通市值', '总市值', '数据日期', '更新时间']
2025-03-31 15:06:46,526 - INFO - 数据样例:
       代码       名称    最新价  IOPV实时估值  基金折价率  ...          最新份额        流通市值         总市值       数据日期                      更新时间
0  159822   新经济ETF  0.850    0.6882 -23.51  ...  4.682343e+08   397999172   397999172 2025-03-31 2025-03-31 15:05:48+08:00
1  159321  黄金股票ETF  1.038    1.0243  -1.34  ...  4.540040e+07    47125612    47125612 2025-03-31 2025-03-31 15:06:12+08:00
2  159985    豆粕ETF  1.938    1.9398   0.09  ...  1.469524e+09  2847937636  2847937636 2025-03-31 2025-03-31 15:05:57+08:00

[3 rows x 37 columns]
2025-03-31 15:06:46,528 - INFO - 从东方财富获取到ETF名称: 上证券商ETF
2025-03-31 15:06:46,533 - INFO - 保存ETF 510200:上证券商ETF 到数据库成功
2025-03-31 15:06:46,733 - INFO - ETF获取和保存完成: 成功 1, 失败 0
2025-03-31 15:06:46,733 - INFO - ETF名称获取脚本运行完成
2025-04-01 09:11:23,558 - INFO - ETF名称获取脚本开始运行 - 2025-04-01 09:11:23.558154
2025-04-01 09:11:23,558 - INFO - Python版本: 3.12.5 (main, Mar 15 2025, 09:18:22) [GCC 12.3.1 20230912 (OpenCloudOS 12.3.1.1-1)]
2025-04-01 09:11:23,558 - INFO - AKSHARE版本: 1.16.45
2025-04-01 09:11:23,559 - INFO - 当前表结构: ['id', 'symbol', 'name', 'description', 'is_official', 'category', 'correlation', 'volatility_type', 'weight', 'created_at', 'last_updated', 'updated_at']
2025-04-01 09:11:23,559 - INFO - 尝试从东方财富获取ETF 510100 信息...
2025-04-01 09:11:32,299 - INFO - 获取到ETF数据，形状: (1081, 37), 列名: ['代码', '名称', '最新价', 'IOPV实时估值', '基金折价率', '涨跌额', '涨跌幅', '成交量', '成交额', '开盘价', '最高价', '最低价', '昨收', '振幅', '换手率', '量比', '委比', '外盘', '内盘', '主力净流入-净额', '主力净流入-净占比', '超大单净流入-净额', '超大单净流入-净占比', '大单净流入-净额', '大单净流入-净占比', '中单净流入-净额', '中单净流入-净占比', '小单净流入-净额', '小单净流入-净占比', '现手', '买一', '卖一', '最新份额', '流通市值', '总市值', '数据日期', '更新时间']
2025-04-01 09:11:32,332 - INFO - 数据样例:
       代码           名称  最新价  IOPV实时估值  基金折价率  ...          最新份额        流通市值         总市值       数据日期                      更新时间
0  589990  科创综指ETF华泰柏瑞  NaN       NaN    NaN  ...  4.500900e+08   431186220   431186220 2025-04-01 2025-04-01 08:30:03+08:00
1  589900    科创综指ETF博时  NaN       NaN    NaN  ...  1.128908e+09  1073591706  1073591706 2025-04-01 2025-04-01 08:30:04+08:00
2  589890    科创综指ETF景顺  NaN       NaN    NaN  ...  6.849870e+08   649367684   649367684 2025-04-01 2025-04-01 08:30:05+08:00

[3 rows x 37 columns]
2025-04-01 09:11:32,334 - INFO - 从东方财富获取到ETF名称: 上证50ETF易方达
2025-04-01 09:11:32,340 - INFO - 保存ETF 510100:上证50ETF易方达 到数据库成功
2025-04-01 09:11:32,541 - INFO - ETF获取和保存完成: 成功 1, 失败 0
2025-04-01 09:11:32,541 - INFO - ETF名称获取脚本运行完成
2025-04-01 09:14:01,588 - INFO - ETF名称获取脚本开始运行 - 2025-04-01 09:14:01.588846
2025-04-01 09:14:01,589 - INFO - Python版本: 3.12.5 (main, Mar 15 2025, 09:18:22) [GCC 12.3.1 20230912 (OpenCloudOS 12.3.1.1-1)]
2025-04-01 09:14:01,589 - INFO - AKSHARE版本: 1.16.45
2025-04-01 09:14:01,589 - INFO - 当前表结构: ['id', 'symbol', 'name', 'description', 'is_official', 'category', 'correlation', 'volatility_type', 'weight', 'created_at', 'last_updated', 'updated_at']
2025-04-01 09:14:01,590 - INFO - 尝试从东方财富获取ETF 159512 信息...
2025-04-01 09:14:07,024 - INFO - 获取到ETF数据，形状: (1081, 37), 列名: ['代码', '名称', '最新价', 'IOPV实时估值', '基金折价率', '涨跌额', '涨跌幅', '成交量', '成交额', '开盘价', '最高价', '最低价', '昨收', '振幅', '换手率', '量比', '委比', '外盘', '内盘', '主力净流入-净额', '主力净流入-净占比', '超大单净流入-净额', '超大单净流入-净占比', '大单净流入-净额', '大单净流入-净占比', '中单净流入-净额', '中单净流入-净占比', '小单净流入-净额', '小单净流入-净占比', '现手', '买一', '卖一', '最新份额', '流通市值', '总市值', '数据日期', '更新时间']
2025-04-01 09:14:07,053 - INFO - 数据样例:
       代码           名称  最新价  IOPV实时估值  基金折价率  ...          最新份额        流通市值         总市值       数据日期                      更新时间
0  589990  科创综指ETF华泰柏瑞  NaN       NaN    NaN  ...  4.500900e+08   431186220   431186220 2025-04-01 2025-04-01 08:30:03+08:00
1  589900    科创综指ETF博时  NaN       NaN    NaN  ...  1.128908e+09  1073591706  1073591706 2025-04-01 2025-04-01 08:30:04+08:00
2  589890    科创综指ETF景顺  NaN       NaN    NaN  ...  6.849870e+08   649367684   649367684 2025-04-01 2025-04-01 08:30:05+08:00

[3 rows x 37 columns]
2025-04-01 09:14:07,055 - INFO - 从东方财富获取到ETF名称: 汽车ETF
2025-04-01 09:14:07,059 - INFO - 保存ETF 159512:汽车ETF 到数据库成功
2025-04-01 09:14:07,260 - INFO - ETF获取和保存完成: 成功 1, 失败 0
2025-04-01 09:14:07,260 - INFO - ETF名称获取脚本运行完成
2025-04-01 09:15:47,582 - INFO - ETF名称获取脚本开始运行 - 2025-04-01 09:15:47.582816
2025-04-01 09:15:47,583 - INFO - Python版本: 3.12.5 (main, Mar 15 2025, 09:18:22) [GCC 12.3.1 20230912 (OpenCloudOS 12.3.1.1-1)]
2025-04-01 09:15:47,583 - INFO - AKSHARE版本: 1.16.45
2025-04-01 09:15:47,583 - INFO - 当前表结构: ['id', 'symbol', 'name', 'description', 'is_official', 'category', 'correlation', 'volatility_type', 'weight', 'created_at', 'last_updated', 'updated_at']
2025-04-01 09:15:47,586 - INFO - 尝试从东方财富获取ETF 159516 信息...
2025-04-01 09:15:52,647 - INFO - 获取到ETF数据，形状: (1081, 37), 列名: ['代码', '名称', '最新价', 'IOPV实时估值', '基金折价率', '涨跌额', '涨跌幅', '成交量', '成交额', '开盘价', '最高价', '最低价', '昨收', '振幅', '换手率', '量比', '委比', '外盘', '内盘', '主力净流入-净额', '主力净流入-净占比', '超大单净流入-净额', '超大单净流入-净占比', '大单净流入-净额', '大单净流入-净占比', '中单净流入-净额', '中单净流入-净占比', '小单净流入-净额', '小单净流入-净占比', '现手', '买一', '卖一', '最新份额', '流通市值', '总市值', '数据日期', '更新时间']
2025-04-01 09:15:52,676 - INFO - 数据样例:
       代码        名称    最新价  IOPV实时估值  基金折价率  ...          最新份额        流通市值         总市值       数据日期                      更新时间
0  159635   基建50ETF  1.090    0.9935  -9.71  ...  1.068470e+08   116463208   116463208 2025-04-01 2025-04-01 09:15:45+08:00
1  159834      金ETF  7.517    7.3478  -2.30  ...  7.756138e+07   583028863   583028863 2025-04-01 2025-04-01 09:15:45+08:00
2  159660  纳指100ETF  1.547    1.5124  -2.29  ...  1.740151e+09  2692014154  2692014154 2025-04-01 2025-04-01 09:15:45+08:00

[3 rows x 37 columns]
2025-04-01 09:15:52,678 - INFO - 从东方财富获取到ETF名称: 半导体设备ETF
2025-04-01 09:15:52,686 - INFO - 保存ETF 159516:半导体设备ETF 到数据库成功
2025-04-01 09:15:52,886 - INFO - ETF获取和保存完成: 成功 1, 失败 0
2025-04-01 09:15:52,886 - INFO - ETF名称获取脚本运行完成
2025-04-01 10:26:37,731 - INFO - ETF名称获取脚本开始运行 - 2025-04-01 10:26:37.731892
2025-04-01 10:26:37,732 - INFO - Python版本: 3.12.5 (main, Mar 15 2025, 09:18:22) [GCC 12.3.1 20230912 (OpenCloudOS 12.3.1.1-1)]
2025-04-01 10:26:37,732 - INFO - AKSHARE版本: 1.16.45
2025-04-01 10:26:37,732 - INFO - 当前表结构: ['id', 'symbol', 'name', 'description', 'is_official', 'category', 'correlation', 'volatility_type', 'weight', 'created_at', 'last_updated', 'updated_at']
2025-04-01 10:26:37,733 - INFO - 尝试从东方财富获取ETF 588700 信息...
2025-04-01 10:26:47,549 - INFO - 获取到ETF数据，形状: (1081, 37), 列名: ['代码', '名称', '最新价', 'IOPV实时估值', '基金折价率', '涨跌额', '涨跌幅', '成交量', '成交额', '开盘价', '最高价', '最低价', '昨收', '振幅', '换手率', '量比', '委比', '外盘', '内盘', '主力净流入-净额', '主力净流入-净占比', '超大单净流入-净额', '超大单净流入-净占比', '大单净流入-净额', '大单净流入-净占比', '中单净流入-净额', '中单净流入-净占比', '小单净流入-净额', '小单净流入-净占比', '现手', '买一', '卖一', '最新份额', '流通市值', '总市值', '数据日期', '更新时间']
2025-04-01 10:26:47,582 - INFO - 数据样例:
       代码          名称    最新价  IOPV实时估值  基金折价率  ...         最新份额       流通市值        总市值       数据日期                      更新时间
0  513780  港股创新药50ETF  1.268    1.2722   0.33  ...  151157000.0  191667076  191667076 2025-04-01 2025-04-01 10:26:40+08:00
1  159567    港股创新药ETF  1.315    1.3252   0.77  ...  574364864.0  755289796  755289796 2025-04-01 2025-04-01 10:26:42+08:00
2  520700  港股创新药ETF基金  1.217    1.2207   0.30  ...  129076000.0  157085492  157085492 2025-04-01 2025-04-01 10:26:37+08:00

[3 rows x 37 columns]
2025-04-01 10:26:47,586 - INFO - 从东方财富获取到ETF名称: 科创医药指数ETF
2025-04-01 10:26:47,592 - INFO - 保存ETF 588700:科创医药指数ETF 到数据库成功
2025-04-01 10:26:47,793 - INFO - ETF获取和保存完成: 成功 1, 失败 0
2025-04-01 10:26:47,793 - INFO - ETF名称获取脚本运行完成
